<div class="widget-box">
	<div class="widget-header">
		<h4>{res:viewcustomerlicenses}</h4>
	</div>
	<div class="widget-body">
		<!-- BEGIN Record alm_customers -->
		<form id="alm_customers" method="post" name="{HTMLFormName}" action="{Action}">
			<div class="row widget-main">
				<!-- BEGIN Error -->
				<div class="alert alert-block alert-danger">
					<button class="close" data-dismiss="alert"><i class="icon-remove"></i></button><strong>
					<li class="icon-remove"></strong>{Error} </li>
				</div>
				<!-- END Error -->
				<div class="row">
					<div class="col-xs-1">
					</div>
					<div class="col-md-10 col-xs-10">
						<div class="alert alert-block alert-success {page:showalert}">
							<button class="close" data-dismiss="alert"><i class="icon-remove"></i></button> 
							<p><strong><i class="icon-ok"></i>{res:saved}</strong>{res:savedmessage}</p>
						</div>
						<div class="alert alert-block alert-danger {page:showalert_contacterror}">
							<p><strong><i class="icon-warning-sign"></i>{res:contacterror}</strong>{res:contacterrormessage}</p>
						</div>
					</div>
				</div>
				<!-- row -->
				<div class="tabbable">
					<ul id="myTab" class="nav nav-tabs">
						<li class="{tab1_active}"><a href="#customerdetails" data-toggle="tab">{res:tabcust_title}</a> 
						<li class="{tab2_active}"><a href="#licensingtab" data-toggle="tab">{res:tablicensing_title}</a> </li>
					</ul>
					<div class="tab-content col-md-12 col-xs-12">
						<div id="customerdetails" class="tab-pane {tab1_active}">
							<div class="row col-xs-12">
								<div class="col-md-1 col-xs-0">
								</div>
								<div class="col-md-5 col-xs-12">
									<label for="s_customer" class="control-label blue">{res:customer}</label><br>
									<input type="text" disabled id="s_customer" class="col-md-12 col-xs-12" maxlength="250" value="{name}" name="{name_Name}" data-validation="required" data-validation-error-msg="{res:invalidcustomer}">
								</div>
								<!-- col -->
								<div class="col-md-2 col-xs-12">
									<label for="s_customer" class="control-label blue">{res:taxid}</label><br>
									<input type="text" disabled id="s_taxid" class="col-md-12 col-xs-12" maxlength="20" value="{taxid}" name="{taxid_Name}">
								</div>
								<div class="col-md-2 col-xs-12">
									<label for="s_type" class="control-label blue">{res:customertype}</label><br>
									<select disabled id="s_type" class="col-md-12 col-xs-12" name="{customertype_id_Name}">
										<option selected value="">{res:CCS_SelectValue}</option>
										{customertype_id_Options}
									</select>
 
								</div>
							</div>
							<!-- row-->
							<div class="row col-xs-12">
								<div class="col-md-1 col-xs-0">
								</div>
								<div class="col-md-5 col-xs-12">
									<label for="s_phone" class="control-label blue">{res:phone}</label><br>
									<input type="text" disabled id="s_phone" class="col-md-12 col-xs-12" maxlength="200" value="{phone}" name="{phone_Name}">
								</div>
								<div class="col-md-5 col-xs-12">
									<label for="s_website" class="control-label blue">{res:website}</label><br>
									<input type="text" disabled id="s_website" class="col-md-12 col-xs-12" maxlength="250" value="{website}" name="{website_Name}">
								</div>
							</div>
							<!-- row -->
							<div class="row col-xs-12">
								<div class="col-md-1 col-xs-0">
								</div>
								<div class="col-md-5 col-xs-12">
									<label for="s_phone" class="control-label blue">{res:address}</label><br>
									<textarea disabled id="s_address" class="col-md-12 col-xs-12" rows="3" cols="49" name="{address_Name}">{address}</textarea>
								</div>
								<div class="col-md-3 col-xs-12">
									<label for="city" class="control-label blue">{res:city}</label><br>
									<select disabled id="city" class="col-md-12 col-xs-12" name="{city_Name}">
										{city_Options}
									</select>
 
								</div>
								<div class="col-md-3 col-xs-12">
									<label for="businesspartner" class="control-label blue">{res:businesspartners}</label><br>
									<label>
									<!-- BEGIN CheckBoxList businesspartner --><input disabled id="businesspartner_{businesspartner:optionNumber}" class="ace ace-checkbox-2" type="checkbox" value="{Value}" name="{businesspartner_Name}" {Check}><span class="lbl">&nbsp;&nbsp;{Description}</span><br>
									<!-- END CheckBoxList businesspartner --></label>
								</div>
							</div>
							<!-- row -->
							<div class="row col-xs-12">
								<div class="col-md-1 col-md-0">
								</div>
								<div class="col-md-10 col-xs-12">
									<h3 class="header smaller lighter red"><span class="icon-phone bigger-130">&nbsp;</span>&nbsp;{res:contacts}</h3>
									<div class="table-responsive">
										<table class="table table-striped table-bordered table-hover">
											<tr>
												<th class="blue text-center"><span class="icon-cogs bigger-150">&nbsp;</span></th>
 
												<th class="blue">{res:contact}</th>
 
												<th class="blue">{res:contact_jobposition}</th>
 
												<th class="blue">{res:phone}</th>
 
												<th class="blue">{res:extension}</th>
 
												<th class="blue">
{res:mobile}</th>
 
												<th class="blue">{res:workemail}</th>
 
												<th class="blue">{res:personalemail}</th>
 
												<th class="blue">{res:dateupdated}</th>
											</tr>
											<!-- BEGIN contact_list -->
											<tr>
												<td nowrap>
													<div class="action-buttons">
													</div>
												</td> 
												<td><span class="icon-asterisk bigger-120 orange {lbmaincontact}">&nbsp;</span>&nbsp;{lbcontact}</td> 
												<td>{lbcontact_jobposition}</td> 
												<td>{lbcontact_phone}</td> 
												<td>{lbcontact_extension}</td> 
												<td>{lbcontact_mobile}</td> 
												<td>{lbcontact_workemail}</td> 
												<td>{lbcontact_personalemail}</td> 
												<td nowrap>{lbcontact_dateupdated}</td>
											</tr>
											<!-- END contact_list -->
										</table>
									</div>
								</div>
							</div>
							<!-- row -->
							<div class="row col-xs-12">
								<!-- <div class="col-md-1 col-xs-0"></div> -->
								<div class="col-md-12 col-xs-12">
									<h3 class="header smaller lighter purple"><span class="icon-briefcase purple bigger-130">&nbsp;</span>&nbsp;{res:licenses}</h3>
									<div class="table-responsive">
										<table class="table table-striped table-bordered table-hover">
											<tr>
												<th class="blue text-center"><span class="icon-cogs bigger-150">&nbsp;</span></th>
 
												<th class="blue">{res:suite_code}</th>
 
												<th class="blue">{res:description}</th>
 
												<th class="blue">{res:product_type}</th>
 
												<th class="blue">{res:nodes_qty}</th>
 
												<th class="blue">{res:channel_sku}</th>
 
												<th class="blue">{res:msrp_price}</th>
 
												<th class="blue">{res:licensesector}</th>
 
												<th class="blue">{res:dateupdated}</th>
											</tr>
											<!-- BEGIN license_list -->
											<tr>
												<td nowrap>
													<div class="action-buttons">
														<div class="inline"><a href="licensing_customers.php?guid={lbguid}&license_guid={lblicense_guid}&tab=licensing" class="green"><i class="icon-pencil bigger-180"></i></a></div>
													</div>
												</td> 
												<td>{lbsuite_code}</td> 
												<td nowrap><span class="orange">{lbsuite_description}</span> <br>
													<span class="small purple">{lbdescription}</span> <br>
													<span class="small green">{lblicense_name}</span> <br>
													<span class="small blue">{res:licensedby}:&nbsp;{lblicensedby_name}</span></td> 
												<td class="text-center"><img src="assets/{lbproduct_typeicon}"></td> 
												<td>{lbnodes_qty}</td> 
												<td>{lbchannel_sku}</td> 
												<td>{lbmsrp_price}</td> 
												<td>{lblicense_for}</td> 
												<td nowrap>{lbdateupdated}</td>
											</tr>
											<!-- END license_list -->
										</table>
									</div>
								</div>
								<!-- col -->
							</div>
							<!-- row -->
						</div>
					</form>
					<!-- END Record alm_customers -->
					<!-- customerdetails tab -->
					<div id="licensingtab" class="tab-pane {tab2_active}">
						<!-- BEGIN Record licensing -->
						<form id="licensing" method="post" name="{HTMLFormName}" action="{Action}">
							<!-- BEGIN Error -->{Error} <!-- END Error -->
							<div class="row col-xs-12">
								<div class="col-md-1 col-xs-0">
								</div>
								<div class="col-md-2 col-xs-12">
									<label class="control-label blue">{res:manufacturer}</label><br>
									<select id="manufacturer" class="width-90 chosen-select" name="{manufacturer_Name}">
										<option selected value="">{res:selectoption}</option>
										{manufacturer_Options}
									</select>
 
								</div>
								<div class="col-md-2 col-xs-12">
									<label class="control-label blue">{res:suite_code}</label><br>
									<select id="suite" class="width-90 chosen-select" name="{suite_code_Name}" data-validation="required" data-validation-error-msg="{res:invalidsuite}">
										<option selected value="">{res:selectoption}</option>
										{suite_code_Options}
									</select>
 
								</div>
								<div class="col-md-7 col-xs-12">
									<label class="control-label blue">{res:product}</label><br>
									<select id="products" class="width-90 chosen-select" name="{id_product_Name}" data-validation="required" data-validation-error-msg="{res:invalidproduct}">
										<option selected value="">{res:selectoption}</option>
										{id_product_Options}
									</select>
 
								</div>
							</div>
							<!-- row -->
							<div class="row col-xs-12 space">
							</div>
							<div class="row col-xs-12">
								<div class="col-md-1 col-xs-0">
								</div>
								<div class="col-md-6 col-xs-12">
									<label class="control-label blue">{res:productdescription}</label><br>
									<input type="text" disabled id="product_description" class="col-md-12 col-xs-12" value="{product_description}" name="{product_description_Name}">
								</div>
								<div class="col-md-5 col-xs-12">
									<label class="control-label blue">{res:productshortname}</label><br>
									<input type="text" disabled id="product_shortdescription" class="col-md-12 col-xs-12" value="{product_shortname}" name="{product_shortname_Name}">
								</div>
							</div>
							<div class="row col-xs-12 space">
							</div>
							<div class="row col-xs-12">
								<div class="col-md-1 col-xs-0">
								</div>
								<div class="col-md-2 col-xs-12">
									<label class="control-label blue">{res:licensesector}</label><br>
									<select id="id_license_sector" class="width-90 chosen-select" name="{id_license_sector_Name}">
										<option selected value="0">{res:selectoption}</option>
										{id_license_sector_Options}
									</select>
 
								</div>
								<div class="col-md-3 col-xs-12">
									<label class="control-label blue">{res:reseller}</label><br>
									<select id="reseller" class="width-90 chosen-select" name="{id_reseller_Name}">
										<option selected value="">{res:selectoption}</option>
										{id_reseller_Options}
									</select>
 
								</div>
								<div class="col-md-3 col-xs-12">
									<label class="control-label blue">{res:product_type}</label><br>
									<!-- BEGIN RadioButton id_product_type --><input id="id_product_type_{Value}" class="ace" type="radio" value="{Value}" name="{id_product_type_Name}" {Check}><span class="lbl">&nbsp;&nbsp;{Description}&nbsp;&nbsp;&nbsp;</span><!-- END RadioButton id_product_type -->
								</div>
							</div>
							<!-- row -->
							<div class="row col-xs-12 space">
							</div>
							<div class="row col-xs-12">
								<div class="col-md-1 col-xs-0">
								</div>
								<div class="col-md-3 col-xs-12">
									<label class="control-label blue">{res:licensetype}</label><br>
									<select id="id_license_type" class="width-90 chosen-select" name="{id_license_type_Name}">
										<option selected value="0">{res:selectoption}</option>
										{id_license_type_Options}
									</select>
 
								</div>
								<div class="col-md-4 col-xs-12">
									<label class="control-label blue">{res:licensedby}</label><br>
									<!-- BEGIN RadioButton id_licensed_by --><input id="id_licensed_by_{Value}" class="ace id_licensed_by" type="radio" value="{Value}" name="{id_licensed_by_Name}" {Check}><span class="lbl">&nbsp;&nbsp;{Description}&nbsp;&nbsp;&nbsp;</span><!-- END RadioButton id_licensed_by -->
								</div>
								<div id="amounts" class="col-md-2 col-xs-12 hide">
									<label class="control-label blue">{res:amount_percentage}</label><br>
									<input type="text" id="licensed_amount" class="col-md-12 col-xs-12" value="{licensed_amount}" name="{licensed_amount_Name}" data-validation="number" data-validation-error-msg="{res:invalidamount}" data-validation-optional="true">
								</div>
								<div id="nodes" class="col-md-2 col-xs-12">
									<div class="row col-xs-12">
										<label class="control-label blue">{res:numberofnodes}</label><br>
										<input type="text" class="col-md-12 col-xs-12" value="{nodes}" name="{nodes_Name}" data-validation="number" data-validation-error-msg="{res:invalidnodes}" data-validation-optional="true">
									</div>
								</div>
								<div class="col-md-2 col-xs-12">
									<div class="row col-xs-12">
										<label class="control-label blue">{res:channel_sku}</label><br>
										<input type="text" id="channel_sku" class="col-md-12 col-xs-12" readonly value="{channel_sku}" name="{channel_sku_Name}" data-validation="required" data-validation-error-msg="{res:invalidsku}">
									</div>
								</div>
							</div>
							<!-- row -->
							<div class="row col-xs-12 space">
							</div>
							<div class="row col-xs-12">
								<div class="col-md-1 col-xs-0">
								</div>
								<div class="col-md-7 col-xs-12">
									<div class="row col-xs-12">
										<label class="control-label blue">{res:suite}</label><br>
										<input type="text" disabled id="suitedescription" class="col-md-12 col-xs-12" value="{suitedescription}" name="{suitedescription_Name}">
									</div>
								</div>
								<div class="col-md-2 col-xs-12">
									<div class="row col-xs-12">
										<label class="control-label blue">{res:msrp_price}</label><br>
										<input type="text" id="msrp_price" class="col-md-12 col-xs-12" value="{msrp_price}" name="{msrp_price_Name}">
									</div>
								</div>
							</div>
							<!-- row -->
							<div class="row col-xs-12 space"></div>
							<div class="row col-xs-12">
								<div class="col-md-1 col-xs-0">
								</div>
								<div class="col-md-3 col-xs-12">
									<div class="row col-xs-12">
										<label class="control-label blue">{res:grantnumber}</label><br>
										<input type="text" class="col-md-12 col-xs-12" value="{grant_number}" name="{grant_number_Name}">
									</div>
								</div>
								<div class="col-md-2 col-xs-12">
									<div class="row col-xs-12">
										<label class="control-label blue">{res:expeditiondate}</label><br>
										<div class="input-group">
											<input type="text" class="col-md-12 col-xs-12 date-picker" value="{expedition_date}" name="{expedition_date_Name}" data-date-format="mm/dd/yyyy">
											<span class="input-group-addon"><i class="icon-calendar bigger-110"></i></span>
										</div>
									</div>
								</div>
								<div class="col-md-2 col-xs-12">
									<div class="row col-xs-12">
										<label class="control-label blue">{res:expirationdate}</label><br>
										<div class="input-group">
											<input type="text" class="col-md-12 col-xs-12 date-picker" value="{expiration_date}" name="{expiration_date_Name}" data-date-format="mm/dd/yyyy">
											<span class="input-group-addon"><i class="icon-calendar bigger-110"></i></span>
										</div>
									</div>
								</div>
								<div class="col-md-4 col-xs-12">
									<div class="row col-xs-12">
										<label class="control-label blue">{res:serialnumber}</label><br>
										<input type="text" class="col-md-12 col-xs-12" value="{serial_number}" name="{serial_number_Name}">
									</div>
								</div>
							</div><!-- row -->

							<div class="row col-xs-12 space hr"></div>

							<div class="row col-xs-12">
								<div class="col-md-1 col-xs-0"></div>
								<div class="col-md-3 col-xs-12"></div>
								<div class="col-md-2 col-xs-12">
									<label class="control-label orange">{res:datecreated}</label><br>
									<input type="text" id="datecreated" class="col-md-12 col-xs-12" disabled value="{datecreated}" name="{datecreated_Name}">
								</div>
								<div class="col-md-2 col-xs-12">
									<label class="control-label orange">{res:dateupdated}</label><br>
									<input type="text" id="dateupdated" class="col-md-12 col-xs-12" disabled value="{dateupdated}" name="{dateupdated_Name}">								
								</div>
							</div>

							<div class="row">
								<div class="col-md-12 col-xs-12">
									<div class="form-actions action-buttons center inline col-xs-12">
										<div class="inline"><a href="licensing.php{lbgoback}" role="button" id="goback" class="btn btn-sm btn-success"><li class="icon-arrow-left"></li>&nbsp;{res:buttongoback}</a> &nbsp;&nbsp;</div>
										<div class="inline">
											<!-- BEGIN Button Button_Insert --><button class="btn btn-sm btn-success" type="submit" name="{Button_Name}" value="{res:buttonsave}"><span class="icon-save"></li>&nbsp; {res:buttonsave}</button><!-- END Button Button_Insert -->
										</div>
										<div class="inline">
											<!-- BEGIN Button Button_Update --><button class="btn btn-sm btn-success" type="submit" name="{Button_Name}" value="{res:buttonsave}"><li class="icon-save"></li>&nbsp; {res:buttonsave}</button><!-- END Button Button_Update -->
										</div>
										<input type="hidden" value="{modified_iduser}" name="{modified_iduser_Name}"><input type="hidden" value="{created_iduser}" name="{created_iduser_Name}"><input type="hidden" value="{hidguid}" name="{hidguid_Name}"><input type="hidden" value="{hidtab}" name="{hidtab_Name}"><input type="hidden" value="{hidcustomer_guid}" name="{hidcustomer_guid_Name}"><input type="hidden" value="{hidcustomer_id}" name="{hidcustomer_id_Name}">
									</div>
								</div>
								<!-- col -->
							</div>
							<!-- row -->
						</div>
						<!-- licensing tab -->
					</div>
					<!-- tabcontent -->
				</div>
				<!-- tabbable -->
			</div>
			<!-- row -->
		</form>
		<!-- END Record licensing -->
	</div>
	<!-- widget-body -->
</div>
<!-- widget-box -->
<link rel="stylesheet" href="assets/css/datepicker.css">
<link rel="stylesheet" href="assets/css/colorbox.css">
<link rel="stylesheet" href="assets/css/chosen.css">
<!-- included here to not mess with too much js in the main page -->
<script src="assets/js/jquery-2.0.3.min.js"></script>
<script src="assets/js/json3.min.js"></script>
<script src="assets/js/form-validator/jquery.form-validator.min.js"></script>
<script src="assets/js/jquery.colorbox-min.js"></script>
<script src="assets/js/date-time/bootstrap-datepicker.min.js"></script>
<script src="assets/js/bootbox.min.js"></script>
<script src="assets/js/jquery-ui-1.10.3.custom.min.js"></script>
<script src="assets/js/jquery.ui.touch-punch.min.js"></script>
<script src="assets/js/jquery.colorbox-min.js"></script>
<script src="assets/js/chosen.jquery.min.js"></script>


<script>
$(function(){
        
        //$("#s_customer").focus();
        $.validate({
                form : "#licensing"
        });

        //Specified the width, for some weird reason, the width-90 class wasnt working
        $(".chosen-select").chosen({width: "90%"}); 

        $(".date-picker").datepicker({
			orientation: "bottom auto",
			autoclose:true,
			todayHighlight: true
        });


        //Default value for radio
        var selectedLicensedBy = $("input[name=id_licensed_by]:checked").val();
        if (selectedLicensedBy == 1) {
                $("#nodes").removeClass("hide");
                $("#amounts").addClass("hide"); 
        } else {
                $("#nodes").addClass("hide");
                $("#amounts").removeClass("hide");      
        }

        $(".id_licensed_by").change(function() {
                var selected = $(this).val();
                if (selected == 1) {
                        $("#nodes").removeClass("hide");
                        $("#amounts").addClass("hide");
                } else {
                        $("#nodes").addClass("hide");
                        $("#amounts").removeClass("hide");
                }
        });


        $("#suite").change(function() {
                var suite_id = $(this).val();
                var params = {m: "suite_description",id: suite_id};
                $.ajax({
                        url: "ajaxget.php",
                        type: "get",
                        data: params
                }).done(function(msg) {
                        $("#suitedescription").val(msg.suite_description);
                        //$("#product_content").val(msg.suite_long_description);
                });

                var params = {m: "product_info",id: suite_id};
                $.ajax({
                        url: "ajaxget.php",
                        type: "get",
                        data: params
                }).done(function(msg) {
                        var products = $("#products");
                        products.empty();
                        products.trigger("chosen:updated");
                        products.append($("<option/>").val("").text("{res:selectoption}") );
                        $.each(msg.products, function() {
                                products.append( $("<option/>").val(this.id).text(this.description +" ( {res:nodes}: "+ this.range_min +" - "+ this.range_max +" ) " + this.short_description ) );
                        });
                        products.trigger("chosen:updated");
                });


        });


        $("#products").change(function() {
                var product_id = $(this).val();
                var params = {m: "product_detail",id: product_id};
                $.ajax({
                        url: "ajaxget.php",
                        type: "get",
                        data: params
                }).done(function(msg) {
                        $.each(msg.products, function() {
                                $("#product_description").val(this.description);
                                $("#product_shortdescription").val(this.short_description);
                                $("#id_license_sector").val(this.id_license_sector);
                                $("#id_license_sector").trigger("chosen:updated");
                                $("#id_product_type_"+this.id_product_type).click();
                                $("#id_license_type").val(this.id_license_type);
                                $("#id_license_type").trigger("chosen:updated");
                                $("#id_licensed_by_"+this.id_licensed_by).click();      
                                $("#licensed_amount").val(this.licensed_amount);
                                $("#channel_sku").val(this.channel_sku);
								var productPrice = parseFloat(this.msrp_price);
                                $("#msrp_price").val(productPrice.toFixed(2));
                        });

                });
        });


        $("#manufacturer").chosen().change(function() {
                var manufacturer_id = $(this).val();
                var params = {m: "suite_manufacturer",id: manufacturer_id};
                $.ajax({
                        url: "ajaxget.php",
                        type: "get",
                        data: params
                }).done(function(msg) {
                        var suite = $("#suite");
                        suite.empty();
                        suite.trigger("chosen:updated");
                        suite.append($("<option/>").val("").text("{res:selectoption}"));
                        $.each(msg.suite, function() {
                                suite.append($("<option/>").val(this.id).text(this.suite_code));
                        });
                        suite.trigger("chosen:updated");

                });
        });


        /*
        $("#myTab a").click(function (e) {
          e.preventDefault();
          $("#hidtab").val(e.target);
        });
        */

		/*
        $(".delcontact").click(function(e) {
            var link = $(this).attr("href");
            e.preventDefault();    
            bootbox.confirm("{res:confirmdelete}", function(result) {
            	if (result) {
                	window.location.replace(link);
                } 
            });

         });
		*/


});

</script>
<ul>
</ul>
</form>
