
<div class="widget-box">
	<div class="widget-header">
		<h4>{res:licensingviewfile}</h4>
	</div>
	<div class="widget-body">
		<div class="row widget-main">
			<div class="slim-scroll" data-height="620">
				<div class="viewfile" id="viewfile"></div>
			</div>
		</div>
	</div><!-- widget body -->
</div><!-- widget box -->

<link rel="stylesheet" href="assets/css/datepicker.css">
<link rel="stylesheet" href="assets/css/colorbox.css">
<link rel="stylesheet" href="assets/css/chosen.css">
<link rel="stylesheet" href="assets/css/dropzone.css" />
<!-- included here to not mess with too much js in the main page -->
<script src="assets/js/jquery-2.0.3.min.js"></script>
<script src="assets/js/json3.min.js"></script>
<script src="assets/js/form-validator/jquery.form-validator.min.js"></script>
<script src="assets/js/jquery.colorbox-min.js"></script>
<script src="assets/js/date-time/bootstrap-datepicker.min.js"></script>
<script src="assets/js/bootbox.min.js"></script>
<script src="assets/js/jquery-ui-1.10.3.custom.min.js"></script>
<script src="assets/js/jquery.ui.touch-punch.min.js"></script>
<script src="assets/js/jquery.colorbox-min.js"></script>
<script src="assets/js/chosen.jquery.min.js"></script>
<script src="assets/js/dropzone.min.js"></script>
<script src="assets/js/pdfjs/build/pdf.js"></script> 
<script src="assets/js/pdfjs/web/compatibility.js"></script> 
<script src="assets/js/jquery.slimscroll.min.js"></script>

<script>
$(function(){



	PDFJS.workerSrc = "assets/js/pdfjs/build/pdf.worker.js";

	function renderPDF(url, canvasContainer, options) {
 
	    var options = options || { scale: 1.5 };
	    function renderPage(page) {
	        var viewport = page.getViewport(options.scale);
	        var canvas = document.createElement("canvas");
	        var ctx = canvas.getContext('2d');
	        var renderContext = {
	          canvasContext: ctx,
	          viewport: viewport
	        };
        
	        canvas.height = viewport.height;
	        canvas.width = viewport.width;
 
	        canvasContainer.appendChild(canvas);
        
	        page.render(renderContext);
	    }
    
	    function renderPages(pdfDoc) {
	        for(var num = 1; num <= pdfDoc.numPages; num++)
	            pdfDoc.getPage(num).then(renderPage);
	    }
 
	    PDFJS.disableWorker = true;
	    PDFJS.getDocument(url).then(renderPages);
 
	}   


	renderPDF("{lbfileurl}", document.getElementById("viewfile"));


	$(".slim-scroll").each(function () {
		var $this = $(this);
		$this.slimScroll({
			height: $this.data("height") || 600,
			color: "#438EB9",
			size: "15px",
			railOpacity: 0.1,
			railVisible:true,
			alwaysVisible: true,
			allowPageScroll: true
		});
	});

});

</script>
